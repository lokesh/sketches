<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1 user-scalable=0">
    <style> body {padding: 0; margin: 0; overflow: hidden;} </style>
    <script src="/node_modules/p5/lib/p5.min.js"></script>
    <script src="/node_modules/dat.gui/build/dat.gui.min.js"></script>
    <script>

// Options
let opts = {
  bg: '#fff',
  count: 20,
  size: 20,
  canvasWidth: 400,
  canvasHeight: 600,
}


let COLORS = [
  '#27B9C4',
  '#C5AE42',
  '#E6B4B8',
  '#B83044',
  '#E2392B'
]


function preload() { }

function windowResized() {
  resizeCanvas(opts.canvasWidth, opts.canvasHeight);
}

function setup() {
  createCanvas(opts.canvasWidth, opts.canvasHeight);
  // colorMode(HSB);

  let gui = new dat.GUI();
  gui.addColor(opts, 'bg')
  gui.add(opts, 'count', 0, 100)
  gui.add(opts, 'size', 0, 128);
  gui.add(opts, 'canvasWidth', 0, 1000)
  gui.add(opts, 'canvasHeight', 0, 1000)

  // noLoop();
  frameRate(1);
}

function draw() {
  resizeCanvas(opts.canvasWidth, opts.canvasHeight);
  background(opts.bg);
  noStroke();

  let cols = Math.floor(opts.canvasWidth / opts.size);
  let rows = Math.floor(opts.canvasHeight / opts.size);
  let gridSquares = cols * rows;

  for (let i = 0; i < opts.count; i++) {
    let row = Math.floor(Math.random() * rows);
    let col = Math.floor(Math.random() * cols);
    // console.log(row, col);

    let color = random(COLORS);
    fill(color);

    // Rect
    rect(col * opts.size, row * opts.size, opts.size, opts.size);
  }
}
    </script>
  </head>
  <body>
  </body>
</html>
